!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function r(e,t){var n=Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&");return"".concat(e,"?").concat(n)}function c(e){var t=e.data;if(t){var e=t.type,n=t.cid,r=t.event;if(e===l&&n&&v.includes(n)){var a,i=document.getElementById(n),o=null!==i;switch(r){case"success":var c=t.token;if(!o)return void w(d.error,"[PM -> success] Input element does not exist.");i.value=c;break;case"failure":case"tokenExpired":if(!o)return void w(d.error,"[PM -> failure] Input element does not exist.");i.value="";break;case"manualStarted":if(!(a=document.getElementById(f(n))))return void w(d.error,"[PM -> manualStarted] Frame does not exist.");a.style.height=h.manual;break;case"manualFinished":(a=document.getElementById(f(n)))?a.style.height=h.default:w(d.error,"[PM -> manualFinished] Frame does not exist.")}}}}function e(e){!(e=void 0===e?!1:e)&&"swecaptcha"in window&&w(d.warn,"Captcha is already loaded."),window.swecaptcha=!0,window.addEventListener("message",c);for(var t,n,r=0,a=Array.from(document.querySelectorAll(".swecaptcha"));r<a.length;r++){var i=a[r],o={pid:(o=i).getAttribute("data-project-id"),respName:o.getAttribute("data-response-input-name")||s,theme:o.getAttribute("data-theme")};if(n=void 0,n=(t=o).theme,t=t.pid,!(n&&!p.includes(n)?(w(d.error,"Invalid data-theme parameter: ".concat(n)),!1):!(!t||!m(t))||(w(d.error,"Invalid data-project-id parameter: ".concat(t)),!1)))return void w(d.error,"Aborting captcha rendering due to invalid parameters.");n=i,t=o,i=void 0,i=g(),t=u(u({},t),{cid:i}),i=y(t),t=x(t),n.appendChild(i),n.appendChild(t)}}var d,u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=window.__SWETRIX_CAPTCHA_DEV||!1,a=t?"./light.html":"https://cap.swetrix.com/pages/light",i=t?"./dark.html":"https://cap.swetrix.com/pages/dark",s="swetrix-captcha-response",l="swetrix-captcha",p=["light","dark"],n=/^(?!.*--)[a-zA-Z0-9-]{12}$/,o=((t=d=d||{}).log="log",t.error="error",t.warn="warn",t.info="info",["AP00000000000","FAIL000000000"]),m=function(e){return o.includes(e)||n.test(e)},h={default:"66px",manual:"200px"},f=function(e){return"".concat(e,"-frame")},v=[],w=function(e,t){console[e]("[Swetrix Captcha] ".concat(t))},g=function(){var e="swetrix-captcha-"+Math.random().toString(36).substr(2,6);return v.includes(e)?g():(v.push(e),e)},y=function(e){var t=e.theme,n=document.createElement("iframe");return n.id=f(e.cid),n.src=r("dark"===t?i:a,e),n.style.height=h.default,n.title="Swetrix Captcha",n.style.border="none",n.style.width="302px",n.style.overflow="visible",n},x=function(e){var t=e.cid,n=document.createElement("input");return n.type="hidden",n.name=e.respName,n.value="",n.id=t,n};window.swetrixCaptchaForceLoad=function(){return e(!0)},document.addEventListener("DOMContentLoaded",function(){return e()})});
