!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function r(e,t){var n=Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&");return"".concat(e,"?").concat(n)}function o(e){var t=e.data;if(t){var e=t.type,n=t.cid,r=t.event;if(e===s&&n&&h.includes(n)){var a,i=document.getElementById(n),o=null!==i;switch(r){case"success":var c=t.token;if(!o)return void v(d.error,"[PM -> success] Input element does not exist.");i.value=c;break;case"failure":case"tokenExpired":if(!o)return void v(d.error,"[PM -> failure] Input element does not exist.");i.value="";break;case"manualStarted":if(!(a=document.getElementById(f(n))))return void v(d.error,"[PM -> manualStarted] Frame does not exist.");a.style.height=p.manual;break;case"manualFinished":(a=document.getElementById(f(n)))?a.style.height=p.default:v(d.error,"[PM -> manualFinished] Frame does not exist.")}}}}var d,e,c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u="swetrix-captcha-response",s="swetrix-captcha",l=["light","dark"],t=/^(?!.*--)[a-zA-Z0-9-]{12}$/,n=((e=d=d||{}).log="log",e.error="error",e.warn="warn",e.info="info",["AP00000000000","MP00000000000","FAIL000000000"]),m=function(e){return n.includes(e)||t.test(e)},p={default:"66px",manual:"200px"},f=function(e){return"".concat(e,"-frame")},h=[],v=function(e,t){console[e]("[Swetrix Captcha] ".concat(t))},w=function(){var e="swetrix-captcha-"+Math.random().toString(36).substr(2,6);return h.includes(e)?w():(h.push(e),e)},g=function(e){var t=e.theme,n=document.createElement("iframe");return n.id=f(e.cid),n.src=r("dark"===t?"./dark.html":"./light.html",e),n.style.height=p.default,n.title="Swetrix Captcha",n.style.border="none",n.style.width="302px",n.style.overflow="visible",n},y=function(e){var t=e.cid,n=document.createElement("input");return n.type="hidden",n.name=e.respName,n.value="",n.id=t,n};document.addEventListener("DOMContentLoaded",function(){"swecaptcha"in window&&v(d.warn,"Captcha is already loaded."),window.swecaptcha=!0,window.addEventListener("message",o);for(var e,t,n=0,r=Array.from(document.querySelectorAll(".swecaptcha"));n<r.length;n++){var a=r[n],i={pid:(i=a).getAttribute("data-project-id"),respName:i.getAttribute("data-response-input-name")||u,theme:i.getAttribute("data-theme")};if(t=void 0,t=(e=i).theme,e=e.pid,!(t&&!l.includes(t)?(v(d.error,"Invalid data-theme parameter: ".concat(t)),!1):!(!e||!m(e))||(v(d.error,"Invalid data-project-id parameter: ".concat(e)),!1)))return void v(d.error,"Aborting captcha rendering due to invalid parameters.");t=a,e=i,a=void 0,a=w(),e=c(c({},e),{cid:a}),a=g(e),e=y(e),t.appendChild(a),t.appendChild(e)}})});
